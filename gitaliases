# Dr Nic Compatibility Mode

alias gl='git pull --rebase --autostash'
alias gap='git add -p'
alias gcp='git checkout -p'
alias gc='git commit -v'
alias gco='git checkout'
alias grh='git reset HEAD'
alias grc='git rebase --continue'
alias grs='git rebase --skip'
alias gra='git rebase --abort'
alias gar='git am --resolved'
alias gas='git am --skip'
alias gaa='git am --abort'
alias sha='git rev-parse HEAD | sed ":a;N;$!ba;s/\n//g" | pbcopy'
alias cherry='git cherry-pick $1'

alias good='git bisect good'
alias bad='git bisect bad'

function branch_name() {
  branch_name="$(git symbolic-ref HEAD 2>/dev/null)"
  branch_name=${branch_name##refs/heads/}
  echo $branch_name
}

function push() {
  git push origin `branch_name`
}

function pull() {
  git pull --rebase origin `branch_name`
}

function rb() {
  git rebase -i HEAD~$1 -p --autostash
}

function pt() {
  `git push origin ${*:1}`
}

fbr() {
  local branches branch
  branches=$(git for-each-ref --count=30 --sort=-committerdate refs/heads/ --format="%(refname:short)") &&
    branch=$(echo "$branches" |
  fzf-tmux -d $(( 2 + $(wc -l <<< "$branches") )) +m) &&
    git checkout $(echo "$branch" | sed "s/.* //" | sed "s#remotes/[^/]*/##")
}

alias pap='pull && push'

alias gitrm="git status | grep deleted | awk '{print $3}' | xargs git rm"

export PATH=/usr/local/git/bin:$PATH
export MANPATH=/usr/local/git/man:$MANPATH
